<!-- templates/tenants/profile.html -->

{% extends 'base.html' %}
{% load static %}

{% block content %}
<h1>{{ tenant_profile.user.username }}'s Profile</h1>

<h2>Favorite Properties</h2>
<div class="favorite-properties" style="display: grid; gap: 15px;">

    {% for fav in favorite_properties %}
        <div class="property-card" style="border:1px solid #ddd; padding:15px; border-radius:8px;">
            <h3>{{ fav.property.get_house_type_display }} - {{ fav.property.house_number }}</h3>
            <p>{{ fav.property.description|truncatewords:20 }}</p>
            <p><strong>Location:</strong> {{ fav.property.location }} | <strong>Rent:</strong> KES {{ fav.property.rent }}</p>

            <!-- Unfavorite button -->
            <form method="post" action="{% url 'tenants:favorite_property' fav.property.id %}">
                {% csrf_token %}
                <button type="submit" style="background:red; color:white; border:none; padding:6px 10px; border-radius:4px;">
                    Remove Favorite
                </button>
            </form>
        </div>
    {% empty %}
        <p>You have no favorite properties yet.</p>
    {% endfor %}
</div>

<h2>Account Details</h2>
<p><strong>Username:</strong> {{ tenant_profile.user.username }}</p>
<p><strong>Email:</strong> {{ tenant_profile.user.email }}</p>
{% endblock %}
